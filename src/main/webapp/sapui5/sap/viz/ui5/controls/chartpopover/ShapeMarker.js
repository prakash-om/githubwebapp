/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2016 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/ui/core/Control','sap/ui/core/theming/Parameters'],function(q,C,P){var S=C.extend('sap.viz.ui5.controls.chartpopover.ShapeMarker',{metadata:{properties:{'type':'string','color':'string','markerSize':'int','showWithLine':'string','lineInfo':'object','stroke':'object','pattern':'string'}},renderer:{render:function(r,c){var m=c.getMarkerSize()?c.getMarkerSize():10;var p=m/2,a=p,w=m,h=m;if(c._isShowWithLine()){p=m;w=m*2;m=6;}var b={rx:m/2,ry:m/2,type:c.getType(),borderWidth:0};r.write('<div');r.writeClasses();r.write('>');r.write('<svg width='+w+'px height='+h+'px '+'focusable = false');r.write('>');if(c._isShowWithLine()){var l=c.getLineInfo(),d=P.get(l.lineColor);if(!d){d=l.lineColor?l.lineColor:c.getColor();}if(l.lineType==='dotted'||l.lineType==='dash'){r.write("<line x1 = '0' y1='"+a+"' x2 = '"+w+"' y2 = '"+a+"' ");r.write("stroke-width = '2' ");r.write(" stroke-dasharray = '5, 3' ");}else if(l.lineType==='dot'){var e=Math.floor(w/2);e=e&1?e:e-1;if(e<3){e=3;}var f=w/e;r.write("<line x1 ='"+(f/2)+"'y1='"+a+"' x2 = '"+w+"' y2 = '"+a+"' ");r.write(" stroke-dasharray = ' 0,"+f*2+"'");r.write("stroke-width = '"+f+"'");r.write("stroke-linecap = 'round'");}else{r.write("<line x1 = '0' y1='"+a+"' x2 = '"+w+"' y2 = '"+a+"' ");r.write("stroke-width = '2' ");}r.write(" stroke = '"+d+"'");r.write("> </line>");}if(b.type){r.write("<path d = '"+c._generateShapePath(b)+"'");var g=c.getPattern();if(!g){r.write(" fill = '"+c.getColor()+"'");}else if(g==='noFill'){var i=P.get('sapUiChartBackgroundColor');if(i==='transparent'){i="white";}r.write(" fill = '"+i+"'");r.write(" stroke = '"+c.getColor()+"' stroke-width= '1px'");}else{r.write(" fill = '"+g+"'");}r.write(" transform = 'translate("+p+","+a+")'");r.write('></path>');}r.write('</svg>');r.write('</div>');r.writeStyles();}}});S.prototype._isShowWithLine=function(){return(this.getShowWithLine()==='line')&&this.getLineInfo();};S.prototype._generateShapePath=function(p){var a;var t=p.borderWidth/2;switch(p.type){case"circle":a="M"+(-p.rx-t)+",0 A"+(p.rx+t)+","+(p.ry+t)+" 0 1,0 "+(p.rx+t)+",0 A";a+=(p.rx+t)+","+(p.ry+t)+" 0 1,0 "+(-p.rx-t)+",0z";break;case"cross":a="M"+(-p.rx-t)+","+(-p.ry/3-t)+"H"+(-p.rx/3-t)+"V"+(-p.ry-t)+"H"+(p.rx/3+t);a+="V"+(-p.ry/3-t)+"H"+(p.rx+t)+"V"+(p.ry/3+t)+"H"+(p.rx/3+t);a+="V"+(p.ry+t)+"H"+(-p.rx/3-t)+"V"+(p.ry/3+t)+"H"+(-p.rx-t)+"Z";break;case"diamond":a="M0,"+(-p.ry-t)+"L"+(p.rx+t)+",0"+" 0,"+(p.ry+t)+" "+(-p.rx-t)+",0"+"Z";break;case"square":case"sector":a="M"+(-p.rx-t)+","+(-p.ry-t)+"L"+(p.rx+t)+",";a+=(-p.ry-t)+"L"+(p.rx+t)+","+(p.ry+t)+"L"+(-p.rx-t)+","+(p.ry+t)+"Z";break;case"triangle-down":case"triangleDown":a="M0,"+(p.ry+t)+"L"+(p.rx+t)+","+-(p.ry+t)+" "+-(p.rx+t)+","+-(p.ry+t)+"Z";break;case"triangle-up":case"triangleUp":a="M0,"+-(p.ry+t)+"L"+(p.rx+t)+","+(p.ry+t)+" "+-(p.rx+t)+","+(p.ry+t)+"Z";break;case"triangle-left":case"triangleLeft":a="M"+-(p.rx+t)+",0L"+(p.rx+t)+","+(p.ry+t)+" "+(p.rx+t)+","+-(p.ry+t)+"Z";break;case"triangle-right":case"triangleRight":a="M"+(p.rx+t)+",0L"+-(p.rx+t)+","+(p.ry+t)+" "+-(p.rx+t)+","+-(p.ry+t)+"Z";break;case"intersection":a="M"+(p.rx+t)+","+(p.ry+t)+"L"+(p.rx/3+t)+",0L"+(p.rx+t)+","+-(p.ry+t)+"L";a+=(p.rx/2-t)+","+-(p.ry+t)+"L0,"+(-p.ry/3-t)+"L"+(-p.rx/2+t)+","+-(p.ry+t)+"L";a+=-(p.rx+t)+","+-(p.ry+t)+"L"+-(p.rx/3+t)+",0L"+-(p.rx+t)+","+(p.ry+t)+"L";a+=(-p.rx/2+t)+","+(p.ry+t)+"L0,"+(p.ry/3+t)+"L"+(p.rx/2-t)+","+(p.ry+t)+"Z";break;case'squareWithRadius':var r=p.rx;var b=r-3;a="M0,"+-r+"L"+-b+","+-r+"Q"+-r+","+-r+" "+-r+","+-b+"L"+-r+","+b+"Q"+-r+","+r+" "+-b+","+r;a+="L"+b+","+r+"Q"+r+","+r+" "+r+","+b+"L"+r+","+-b+"Q"+r+","+-r+" "+b+","+-r+"Z";break;}return a;};return S;});
