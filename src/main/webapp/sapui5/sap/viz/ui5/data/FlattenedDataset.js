/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2016 SAP SE. All rights reserved
 */
sap.ui.define(['sap/viz/library','./Dataset'],function(l,D){"use strict";var F=D.extend("sap.viz.ui5.data.FlattenedDataset",{metadata:{library:"sap.viz",properties:{context:{type:"any",multiple:false,singularName:"context"}},aggregations:{dimensions:{type:"sap.viz.ui5.data.DimensionDefinition",multiple:true,singularName:"dimension"},measures:{type:"sap.viz.ui5.data.MeasureDefinition",multiple:true,singularName:"measure"},data:{type:"sap.ui.core.Element",multiple:true,singularName:"data",bindable:"bindable"}}}});F.getMetadata().getAllAggregations()["data"]._doesNotRequireFactory=true;F.prototype.init=function(){this._transformer=null;this._bSuppressInvalidate=false;};F.prototype.updateData=function(){if(this._bSuppressInvalidate){this._bSuppressInvalidate=false;}else{this.invalidate();}};jQuery.each("add get indexOf insert remove removeAll".split(" "),function(i,m){var M="FlattenedDataset manages the 'data' aggregation only via data binding. The method '"+m+"Data' therefore cannot be used programmatically!";F.prototype[m+"Data"]=function(){jQuery.sap.log.error(M);};});F.prototype.getVIZFlatDataset=function(){jQuery.sap.require('sap.viz.ui5.data.transformers.ModelToFlattable');return this._transform(sap.viz.ui5.data.transformers.ModelToFlattable);};F.prototype.getVIZCrossDataset=function(){jQuery.sap.require('sap.viz.ui5.data.transformers.ModelToCrosstable');return this._transform(sap.viz.ui5.data.transformers.ModelToCrosstable);};F.prototype.getVIZDataset=function(){var r;try{jQuery.sap.require('sap.viz.ui5.data.transformers.ModelToDataset');r=this._transform(sap.viz.ui5.data.transformers.ModelToDataset);}catch(e){r=this.getVIZCrossDataset();}return r;};F.prototype._transform=function(T){if(!this._transformer||!(this._transformer instanceof T)){this._transformer=new T();}return this._transformer.getVizDataset(this.getBinding("data"),this.getDimensions(),this.getMeasures(),this._defaultSelectionInfo,this._info,this.getBindingInfo('data'),this._oPagingOption,this.getContext());};F.prototype.invalidate=function(o){if(this._transformer){this._transformer.reset();}sap.ui.core.Element.prototype.invalidate.apply(this,arguments);};F.prototype.setDefaultSelection=function(s){this._defaultSelectionInfo={'type':'defaultSelection','value':s};};F.prototype.info=function(v){if(v instanceof Array){this._info=v;}else if(v===undefined||typeof v==='string'){if(this._transformer&&this._transformer instanceof sap.viz.ui5.data.transformers.ModelToCrosstable){var c=sap.viz.ui5.data.transformers.ModelToCrosstable.prototype.getVizDataset();if(c){return c.info(v);}}}};F.prototype.findContext=function(c){if(this._transformer){return this._transformer.findContext(c);}};F.prototype.setPagingOption=function(p){this._oPagingOption=p;};F.prototype.getRenderedPageNo=function(){if(this._transformer){return this._transformer.getRenderedPageNo();}};F.prototype.suppressInvalidate=function(){this._bSuppressInvalidate=true;};return F;});
