tinymce.PluginManager.add('contextmenu',function(a){var m,c=a.settings.contextmenu_never_use_native;var b=function(e){return e.ctrlKey&&!c;};var d=function(){return tinymce.Env.mac&&tinymce.Env.webkit;};a.on('mousedown',function(e){if(d()&&e.button===2&&!b(e)){if(a.selection.isCollapsed()){a.once('contextmenu',function(e){a.selection.placeCaretAt(e.clientX,e.clientY);});}}});a.on('contextmenu',function(e){var f;if(b(e)){return;}e.preventDefault();f=a.settings.contextmenu||'link image inserttable | cell row column deletetable';if(!m){var g=[];tinymce.each(f.split(/[ ,]/),function(n){var h=a.menuItems[n];if(n=='|'){h={text:n};}if(h){h.shortcut='';g.push(h);}});for(var i=0;i<g.length;i++){if(g[i].text=='|'){if(i===0||i==g.length-1){g.splice(i,1);}}}m=new tinymce.ui.Menu({items:g,context:'contextmenu',classes:'contextmenu'}).renderTo();a.on('remove',function(){m.remove();m=null;});}else{m.show();}var p={x:e.pageX,y:e.pageY};if(!a.inline){p=tinymce.DOM.getPos(a.getContentAreaContainer());p.x+=e.clientX;p.y+=e.clientY;}m.moveTo(p.x,p.y);});});
