tinymce.PluginManager.add('wordcount',function(a){var s=this,c,b;c=a.getParam('wordcount_countregex',/[\w\u2019\x27\-\u00C0-\u1FFF]+/g);b=a.getParam('wordcount_cleanregex',/[0-9.(),;:!?%#$?\x27\x22_+=\\\/\-]*/g);function u(){a.theme.panel.find('#wordcount').text(['Words: {0}',s.getCount()]);}a.on('init',function(){var d=a.theme.panel&&a.theme.panel.find('#statusbar')[0];if(d){tinymce.util.Delay.setEditorTimeout(a,function(){d.insert({type:'label',name:'wordcount',text:['Words: {0}',s.getCount()],classes:'wordcount',disabled:a.settings.readonly},0);a.on('setcontent beforeaddundo',u);a.on('keyup',function(e){if(e.keyCode==32){u();}});},0);}});s.getCount=function(){var t=a.getContent({format:'raw'});var d=0;if(t){t=t.replace(/\.\.\./g,' ');t=t.replace(/<.[^<>]*?>/g,' ').replace(/&nbsp;|&#160;/gi,' ');t=t.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3").replace(/&.+?;/g,' ');t=t.replace(b,'');var w=t.match(c);if(w){d=w.length;}}return d;};});
