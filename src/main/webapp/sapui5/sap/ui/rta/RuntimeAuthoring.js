/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

(c) Copyright 2009-2016 SAP SE. All rights reserved
 */
sap.ui.define(['jquery.sap.global','sap/ui/base/ManagedObject','sap/ui/rta/ui/ToolsMenu','sap/ui/dt/ElementUtil','sap/ui/dt/DesignTime','sap/ui/dt/OverlayRegistry','sap/ui/dt/Overlay','sap/ui/rta/command/Stack','sap/ui/rta/command/CommandFactory','sap/ui/rta/command/LREPSerializer','sap/ui/rta/plugin/Rename','sap/ui/rta/plugin/DragDrop','sap/ui/rta/plugin/RTAElementMover','sap/ui/dt/plugin/CutPaste','sap/ui/rta/plugin/Remove','sap/ui/rta/plugin/CreateContainer','sap/ui/rta/plugin/additionalElements/AdditionalElementsPlugin','sap/ui/rta/plugin/additionalElements/AddElementsDialog','sap/ui/rta/plugin/additionalElements/AdditionalElementsAnalyzer','sap/ui/rta/plugin/Selection','sap/ui/rta/plugin/MultiSelection','sap/ui/rta/plugin/Settings','sap/ui/dt/plugin/ContextMenu','sap/ui/dt/plugin/TabHandling','sap/ui/fl/FlexControllerFactory','sap/ui/rta/ui/SettingsDialog','sap/ui/rta/ui/AddElementsDialog','./Utils','sap/ui/fl/transport/Transports','sap/ui/fl/transport/TransportSelection','sap/ui/fl/Utils','sap/ui/fl/registry/Settings','sap/m/MessageBox','sap/m/MessageToast','sap/ui/rta/controlAnalyzer/ControlAnalyzerFactory'],function(q,M,T,E,D,O,a,C,b,L,R,c,d,e,f,g,A,h,j,S,k,l,m,n,F,o,p,U,r,s,t,u,v,w,x){"use strict";var y=M.extend("sap.ui.rta.RuntimeAuthoring",{metadata:{library:"sap.ui.rta",associations:{"rootControl":{type:"sap.ui.core.Control"}},properties:{"customFieldUrl":"string","showCreateCustomField":"boolean","showToolbars":{type:"boolean",defaultValue:true},"showSettingsDialog":{type:"boolean",defaultValue:true},"showWindowUnloadDialog":{type:"boolean",defaultValue:true},"commandStack":{type:"sap.ui.rta.command.Stack"}},events:{"start":{},"stop":{},"failed":{},"selectionChange":{parameters:{selection:{type:"sap.ui.dt.Overlay[]"}}},"undoRedoStackModified":{}}},_sAppTitle:null});y.prototype.init=function(){this._onCommandStackModified=this._adaptUndoRedoButtons.bind(this);};y.prototype.start=function(){var i=this;this._aPopups=[];this._oTextResources=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");this._aSupportedControls=["sap.ui.comp.smartform.Group","sap.uxap.ObjectPageSection","sap.uxap.ObjectPageLayout"];if(!this._oDesignTime){this._oRootControl=sap.ui.getCore().byId(this.getRootControl());this._oRTAElementMover=new d();this._oRTAElementMover.setCommandFactory(b);this._oRTADragDropPlugin=new c({elementMover:this._oRTAElementMover,commandFactory:b}).attachElementModified(this._handleElementModified,this);this._oRTADragDropPlugin.attachDragStarted(this._handleStopCutPaste,this);this._oCutPastePlugin=new e({elementMover:this._oRTAElementMover,commandFactory:b}).attachElementModified(this._handleElementModified,this);this._oRemovePlugin=new f({commandFactory:b}).attachElementModified(this._handleElementModified,this);this._oAdditionalElementsPlugin=new A({commandFactory:b,analyzer:j,dialog:new h()}).attachElementModified(this._handleElementModified,this);this._oRenamePlugin=new R({commandFactory:b}).attachElementModified(this._handleElementModified,this);this._oRenamePlugin.attachEditable(this._handleStopCutPaste,this);this._oSelectionPlugin=new S();this._oMultiSelectionPlugin=new k({multiSelectionTypes:["sap.ui.comp.smartform.GroupElement"]});this._oSettingsPlugin=new l({commandFactory:b,commandStack:this.getCommandStack()}).attachElementModified(this._handleElementModified,this);this._oCreateContainerPlugin=new g({commandFactory:b}).attachElementModified(this._handleElementModified,this);this._oContextMenuPlugin=new m();this._oTabHandlingPlugin=new n();this._buildContextMenu();q.sap.measure.start("rta.dt.startup","Measurement of RTA: DesignTime start up");this._oDesignTime=new D({rootElements:[this._oRootControl],plugins:[this._oRTADragDropPlugin,this._oCutPastePlugin,this._oRemovePlugin,this._oRenamePlugin,this._oSelectionPlugin,this._oMultiSelectionPlugin,this._oSettingsPlugin,this._oCreateContainerPlugin,this._oContextMenuPlugin,this._oTabHandlingPlugin,this._oAdditionalElementsPlugin]});q(a.getOverlayContainer()).addClass("sapUiRta");this._oDesignTime.attachSelectionChange(function(_){i.fireSelectionChange({selection:_.getParameter("selection")});},this);this._oDesignTime.attachEventOnce("synced",function(){i.fireStart();q.sap.measure.end("rta.dt.startup","Measurement of RTA: DesignTime start up");});this._oDesignTime.attachEventOnce("syncFailed",function(){i.fireFailed();});}if(this.getShowToolbars()){this._createToolsMenu();var $={"onAfterRendering":function(){this._oToolsMenu._oToolBar.focus();this._oToolsMenu._oToolBar.removeEventDelegate($,this);}};this._oToolsMenu._oToolBar.addEventDelegate($,this);this._oToolsMenu.show();}this._oldUnloadHandler=window.onbeforeunload;window.onbeforeunload=this._onUnload.bind(this);};var z=function(i){var $=i.message||i.status||i;var _=sap.ui.getCore().getLibraryResourceBundle("sap.ui.rta");q.sap.log.error("Failed to transfer runtime adaptation changes to layered repository",$);q.sap.require("sap.m.MessageBox");var a1=_.getText("MSG_LREP_TRANSFER_ERROR")+"\n"+_.getText("MSG_ERROR_REASON",$);sap.m.MessageBox.error(a1);};y.prototype.setCommandStack=function(i){var $=this.getProperty("commandStack");if($){$.detachModified(this._onCommandStackModified);}if(this._oInternalCommandStack){this._oInternalCommandStack.destroy();delete this._oInternalCommandStack;}var _=this.setProperty("commandStack",i);if(i){i.attachModified(this._onCommandStackModified);}if(this._oSettingsPlugin){this._oSettingsPlugin.setCommandStack(i);}return _;};y.prototype.getCommandStack=function(){var i=this.getProperty("commandStack");if(!i){i=new C();this._oInternalCommandStack=i;}this.setCommandStack(i);return i;};y.prototype._adaptUndoRedoButtons=function(){if(this.getShowToolbars()){var i=this.getCommandStack();var $=i.canUndo();var _=i.canRedo();this._oToolsMenu.adaptUndoRedoEnablement($,_);this._oToolsMenu.adaptTransportEnablement(this._bChangesExist||$);this._oToolsMenu.adaptRestoreEnablement(this._bChangesExist||$);}this.fireUndoRedoStackModified();};y.prototype._closeToolBars=function(){if(this.getShowToolbars()){return this._oToolsMenu.hide();}else{return Promise.resolve();}};y.prototype.getSelection=function(){if(this._oDesignTime){return this._oDesignTime.getSelection();}else{return[];}};y.prototype.stop=function(i){var $=this;return((i)?Promise.resolve():this._serializeToLrep()).then(this._closeToolBars.bind(this)).then(function(){$.exit();$.fireStop();})['catch'](z);};y.prototype.restore=function(){this._onRestore();};y.prototype.transport=function(){this._onTransport();};y.prototype.undo=function(){this._onUndo();};y.prototype.redo=function(){this._onRedo();};y.prototype.canUndo=function(){return this.getCommandStack().canUndo();};y.prototype.canRedo=function(){return this.getCommandStack().canRedo();};y.prototype._onUnload=function(){var i=this.getCommandStack();var $=i.canUndo()||i.canRedo();if($&&this.getShowWindowUnloadDialog()){var _=this._oTextResources.getText("MSG_UNSAVED_CHANGES");return _;}else{window.onbeforeunload=this._oldUnloadHandler;}};y.prototype._serializeToLrep=function(){var i=new L({commandStack:this.getCommandStack(),rootControl:this.getRootControl()});return i.saveCommands();};y.prototype._onUndo=function(){this._handleStopCutPaste();this.getCommandStack().undo();};y.prototype._onRedo=function(){this._handleStopCutPaste();this.getCommandStack().redo();};y.prototype._createToolsMenu=function(){var i=this;if(!this._oToolsMenu){this._sAppTitle=this._getApplicationTitle();this._oToolsMenu=new T();this._oToolsMenu.createToolbar();this._oToolsMenu.setTitle(this._sAppTitle);this._oToolsMenu.setRootControl(this._oRootControl);this._oToolsMenu.checkTransportAvailable().then(function($){i._bATOTransportEnabled=$;});this._checkChangesExist().then(function($){i._bChangesExist=$;i._oToolsMenu.adaptTransportEnablement($);i._oToolsMenu.adaptRestoreEnablement($);});this._oToolsMenu.attachToolbarClose(this.stop.bind(this,false),this);this._oToolsMenu.attachTransport(this._onTransport,this);this._oToolsMenu.attachRestore(this._onRestore,this);this._oToolsMenu.attachUndo(this._onUndo,this);this._oToolsMenu.attachRedo(this._onRedo,this);}};y.prototype.exit=function(){if(this._oDesignTime){q(a.getOverlayContainer()).removeClass("sapUiRta");this._oDesignTime.destroy();this._oDesignTime=null;}if(this._oToolsMenu){this._oToolsMenu.destroy();this._oToolsMenu=null;}this.setCommandStack(null);window.onbeforeunload=this._oldUnloadHandler;};y.prototype._onTransport=function(){var i=this;function $(_){if(_.message==='createAndApply failed'){return;}t.log.error("transport error"+_);return i._showMessage(v.Icon.ERROR,"HEADER_TRANSPORT_ERROR","MSG_TRANSPORT_ERROR",_);}this._handleStopCutPaste();return this._openSelection().then(this._checkTransportInfo).then(function(_){if(_){var a1=F.createForControl(i._oRootControl);return i._serializeToLrep().then(function(){return a1.getComponentChanges().then(function(b1){if(b1.length>0){return i._createAndApplyChanges(b1,a1).then(i._transportAllLocalChanges.bind(i,_,a1))['catch']($);}});})['catch'](z);}});};y.prototype._checkTransportInfo=function(i){if(i&&i.transport&&i.packageName!=="$TMP"){return i;}else{return false;}};y.prototype._openSelection=function(){return new s().openTransportSelection(null,this._oRootControl);};y.prototype._createAndApplyChanges=function(i,$){var _=this;return Promise.resolve().then(function(){function a1(b1){return b1&&b1.selector&&b1.selector.id;}i.filter(a1).forEach(function(b1){var c1=sap.ui.getCore().byId(b1.selector.id);$.createAndApplyChange(b1,c1);});})['catch'](function(a1){t.log.error("Create and apply error: "+a1);return a1;}).then(function(a1){return $.saveAll().then(function(){if(a1){throw a1;}});})['catch'](function(a1){t.log.error("Create and apply and/or save error: "+a1);return _._showMessage(v.Icon.ERROR,"HEADER_TRANSPORT_APPLYSAVE_ERROR","MSG_TRANSPORT_APPLYSAVE_ERROR",a1);});};y.prototype._deleteChanges=function(){var i=this;var $=new s();var _=F.createForControl(this._oRootControl);_.getComponentChanges().then(function(a1){return u.getInstance(t.getComponentClassName(i._oRootControl)).then(function(b1){if(!b1.isProductiveSystem()&&!b1.hasMergeErrorOccured()){return $.setTransports(a1,i._oRootControl);}}).then(function(){return _.discardChanges(a1);}).then(function(){return window.location.reload();});})["catch"](function(a1){return i._showMessage(v.Icon.ERROR,"HEADER_RESTORE_FAILED","MSG_RESTORE_FAILED",a1);});};y.prototype._showMessage=function(i,$,_,a1){if(a1){var b1=this._oTextResources.getText(_,[a1.message||a1]);}else{var b1=this._oTextResources.getText(_);}var c1=this._oTextResources.getText($);return new Promise(function(d1){v.show(b1,{icon:i,title:c1,onClose:d1});});};y.prototype._showMessageToast=function(i){var $=this._oTextResources.getText(i);w.show($);};y.needsRestart=function(){var i=!!window.localStorage.getItem("sap.ui.rta.restart");return i;};y.enableRestart=function(){window.localStorage.setItem("sap.ui.rta.restart",true);};y.disableRestart=function(){window.localStorage.removeItem("sap.ui.rta.restart");};y.prototype._onRestore=function(){var i=this;var $=this._oTextResources.getText("FORM_PERS_RESET_MESSAGE");var _=this._oTextResources.getText("FORM_PERS_RESET_TITLE");this._handleStopCutPaste();function a1(b1){if(b1==="OK"){i.getCommandStack().removeAllCommands();y.enableRestart();i._deleteChanges();}}v.confirm($,{icon:v.Icon.WARNING,title:_,onClose:a1});};y.prototype._transportAllLocalChanges=function(i,$){var _=this;return $.getComponentChanges().then(function(a1){var b1=new r();var c1=b1._convertToChangeTransportData(a1);var d1={};d1.package=i.packageName;d1.transportId=i.transport;d1.changeIds=c1;return b1.makeChangesTransportable(d1).then(function(){a1.forEach(function(e1){if(e1.getPackage()==='$TMP'){var f1=e1.getDefinition();f1.packageName=i.packageName;e1.setResponse(f1);}});}).then(function(){_._showMessageToast("MSG_TRANSPORT_SUCCESS");});});};y.prototype._isEqualParentInfo=function(i,$){var _=!!i&&!!$;if(_&&(i.parent&&$.parent)){_=i.parent.getId()===$.parent.getId();}if(_&&(i.index||$.index)){_=i.index===$.index;}if(_&&(i.aggregation||$.aggregation)){_=i.aggregation===$.aggregation;}return _;};y.prototype._handleElementModified=function(i){this._handleStopCutPaste();var $=i.getParameter("command");if($ instanceof sap.ui.rta.command.BaseCommand){this.getCommandStack().pushAndExecute($);}};y.prototype._handleRemoveElement=function(i){this._oRemovePlugin.removeElement(i);};y.prototype._openSettingsDialog=function(i){var $=(i.mParameters)?i.getParameter("selectedOverlays"):i;var _=$[0].getElementInstance();this._handleStopCutPaste();if(!this._oSettingsDialog){this._oSettingsDialog=new o();}this._oSettingsDialog.setCommandStack(this.getCommandStack());this._oSettingsDialog.open(_);};var B=function(i){return this._oDesignTime.getSelection().length<2;};var H=function(i){return U.hasParentStableId(i);};var I=function(i){return i.getMovable();};var G=function(i){return i.getElementInstance().getMetadata().getName()==="sap.ui.comp.smartform.GroupElement";};var J=function(i){return i.getElementInstance().getMetadata().getName()==="sap.ui.comp.smartform.Group";};var K=function(i){var $=i.getElementInstance();var _=x.getControlAnalyzerFor($);if(_._getSimpleFormContainer){return!!_._getSimpleFormContainer($);}else{return false;}};var N=function(i){var $=i.getElementInstance();return $.getMetadata().getName()==="sap.uxap.ObjectPageSection";};var P=function(i){var $=i.getElementInstance();return $.getMetadata().getName()==="sap.uxap.ObjectPageLayout";};var Q=function(i){return this._oRemovePlugin.isRemoveAvailable(i);};var V=function(i){return this._oRemovePlugin.isRemoveEnabled(i);};var W=function(i){return this._oRenamePlugin.isRenameAvailable(i);};var X=function(i){return this._oRenamePlugin.isRenameEnabled(i);};var Y=function(i){return this._oSettingsPlugin.isSettingsAvailable(i);};var Z=function(i){return this._oSettingsPlugin.isSettingsEnabled(i);};y.prototype._buildContextMenu=function(){var i=this;this._oContextMenuPlugin.addMenuItem({id:"CTX_RENAME_LABEL",text:i._oTextResources.getText("CTX_RENAME"),handler:this._handleRename.bind(this),available:W.bind(this),enabled:function($){return(B.call(i,$)&&X.call(i,$));}});if(/[&?](sap-rta-new-add=(true|x)[&#]?)+/i.test(window.location.search)){this._oContextMenuPlugin.addMenuItem({id:"CTX_ADD_ELEMENTS_AS_SIBLING",text:i._oAdditionalElementsPlugin.getContextMenuTitle.bind(i._oAdditionalElementsPlugin,true),handler:i._oAdditionalElementsPlugin.showAvailableElements.bind(i._oAdditionalElementsPlugin,true),available:i._oAdditionalElementsPlugin.isAvailable.bind(i._oAdditionalElementsPlugin,true),enabled:function($){return B.call(i,$)&&i._oAdditionalElementsPlugin.isEnabled(true,$);}});this._oContextMenuPlugin.addMenuItem({id:"CTX_ADD_ELEMENTS_AS_CHILD",text:i._oAdditionalElementsPlugin.getContextMenuTitle.bind(i._oAdditionalElementsPlugin,false),handler:i._oAdditionalElementsPlugin.showAvailableElements.bind(i._oAdditionalElementsPlugin,false),available:i._oAdditionalElementsPlugin.isAvailable.bind(i._oAdditionalElementsPlugin,false),enabled:function($){return B.call(i,$)&&i._oAdditionalElementsPlugin.isEnabled(false,$);}});}else{this._oContextMenuPlugin.addMenuItem({id:"CTX_ADD_FORM_FIELD",text:i._oTextResources.getText("CTX_ADD_FIELD"),handler:this._handleAddElement.bind(this),available:function($){var _=$.getElementInstance();return K($)&&((E.isInstanceOf(_,"sap.ui.layout.form.FormElement"))||(E.isInstanceOf(_,"sap.ui.layout.form.FormContainer")&&_.getTitle()!==null)||(E.isInstanceOf(_,"sap.ui.layout.form.FormContainer")&&_.getToolbar()!==null));},enabled:H});this._oContextMenuPlugin.addMenuItem({id:"CTX_ADD_FIELD",text:i._oTextResources.getText("CTX_ADD_FIELD"),handler:this._handleAddElement.bind(this),available:function($){return J($)||G($);},enabled:function($){return B.call(i,$)&&(J($)||H($));}});this._oContextMenuPlugin.addMenuItem({id:"CTX_ADD_SECTION",text:i._oTextResources.getText("CTX_ADD_SECTION"),handler:this._handleAddElement.bind(this),available:function($){return N($)||P($);},enabled:function($){return U.hasObjectPageLayoutInvisibleSections.bind(U)&&(P($)||H($));}});}this._oContextMenuPlugin.addMenuItem({id:"CTX_CREATE_CHILD_CONTAINER",text:this._oCreateContainerPlugin.getCreateContainerText.bind(this._oCreateContainerPlugin,false),handler:this._createContainer.bind(this,false),available:this._oCreateContainerPlugin.isCreateAvailable.bind(this._oCreateContainerPlugin,false),enabled:this._oCreateContainerPlugin.isCreateEnabled.bind(this._oCreateContainerPlugin,false)});this._oContextMenuPlugin.addMenuItem({id:"CTX_CREATE_SIBLING_CONTAINER",text:this._oCreateContainerPlugin.getCreateContainerText.bind(this._oCreateContainerPlugin,true),handler:this._createContainer.bind(this,true),available:this._oCreateContainerPlugin.isCreateAvailable.bind(this._oCreateContainerPlugin,true),enabled:this._oCreateContainerPlugin.isCreateEnabled.bind(this._oCreateContainerPlugin,true)});this._oContextMenuPlugin.addMenuItem({id:"CTX_REMOVE",text:i._oTextResources.getText("CTX_REMOVE"),handler:this._handleRemoveElement.bind(this),available:Q.bind(this),enabled:V.bind(this)});this._oContextMenuPlugin.addMenuItem({id:"CTX_CUT",text:i._oTextResources.getText("CTX_CUT"),handler:this._handleCutElement.bind(this),available:I,enabled:function(){return i._oDesignTime.getSelection().length===1;}});this._oContextMenuPlugin.addMenuItem({id:"CTX_PASTE",text:i._oTextResources.getText("CTX_PASTE"),handler:this._handlePasteElement.bind(this),available:I,enabled:function($){return i._oCutPastePlugin.isElementPasteable($);}});this._oContextMenuPlugin.addMenuItem({id:"CTX_GROUP_FIELDS",text:i._oTextResources.getText("CTX_GROUP_FIELDS"),handler:this._handleGroupElements.bind(this),available:function(){var $=i._oDesignTime.getSelection();return($.length>1);},enabled:function(){var $=true;var _=[];var a1=i._oDesignTime.getSelection();a1.forEach(function(b1){var c1=b1.getElementInstance();_=_.concat(c1.getFields());});if(a1.length>3||_.length>3){return false;}a1.some(function(b1){var c1=b1.getElementInstance();if(U.hasGroupElementUnBoundFields(c1)){$=false;return true;}});return $;}});this._oContextMenuPlugin.addMenuItem({id:"CTX_UNGROUP_FIELDS",text:i._oTextResources.getText("CTX_UNGROUP_FIELDS"),handler:this._handleUngroupElements.bind(this),available:function($){var _=$.getElementInstance();var a1=i._oDesignTime.getSelection();return G($)&&_.getFields().length>1&&a1.length<2;},enabled:function($){var _=$.getElementInstance();return!U.hasGroupElementUnBoundFields(_);}});this._oContextMenuPlugin.addMenuItem({id:"CTX_SETTINGS",text:i._oTextResources.getText("CTX_SETTINGS"),handler:this._handleSettings.bind(this),available:Y.bind(this),enabled:Z.bind(this)});};y.prototype._createContainer=function(i,$){this._handleStopCutPaste();var _=this;var a1=$[0];var b1=this._oCreateContainerPlugin.handleCreate(i,a1);var c1={"onAfterRendering":function(){setTimeout(function(){_._oRenamePlugin.startEdit(b1);},0);b1.removeEventDelegate(c1);}};b1.addEventDelegate(c1);};y.prototype._handleRename=function(i){var $=i[0];this._oRenamePlugin.startEdit($);};y.prototype._handleAddElement=function(i){this._handleStopCutPaste();var $=i[0].getElementInstance();if(!this._oAddElementsDialog){this._oAddElementsDialog=new p({rootControl:this._oRootControl});}this._oAddElementsDialog.setCommandStack(this.getCommandStack());this._oAddElementsDialog.open($);};y.prototype._handleCutElement=function(i){var $=i[0];this._oCutPastePlugin.cut($);};y.prototype._handlePasteElement=function(i){var $=i[0];this._oCutPastePlugin.paste($);};y.prototype._handleStopCutPaste=function(){this._oCutPastePlugin.stopCutAndPaste();};y.prototype._handleGroupElements=function(){this._handleStopCutPaste();var $=this._oDesignTime.getSelection();var _=this._oContextMenuPlugin.getContextElement();var a1=U.getClosestTypeForControl(_,"sap.ui.comp.smartform.Group");var b1=a1.getGroupElements().indexOf(_);var c1=U.findSupportedBlock(_,this._aSupportedControls);var d1=U.getClosestTypeForControl(_,"sap.ui.comp.smartform.SmartForm");var e1=[];for(var i=0;i<$.length;i++){var f1=$[i].getElementInstance();e1.push(f1);}var g1=b.getCommandFor(c1,"group",{source:_,index:b1,groupFields:e1,smartForm:d1});this.getCommandStack().pushAndExecute(g1);};y.prototype._handleUngroupElements=function(){this._handleStopCutPaste();var i=this._oContextMenuPlugin.getContextElement();var $=U.getClosestTypeForControl(i,"sap.ui.comp.smartform.SmartForm");var _=b.getCommandFor(i,"ungroup",{smartForm:$});this.getCommandStack().pushAndExecute(_);};y.prototype._handleSettings=function(i){this._oSettingsPlugin.handleSettings(i);};y.prototype._getSmartFormForElement=function(i){while(i&&!E.isInstanceOf(i,"sap.ui.comp.smartform.SmartForm")){i=i.getParent();}return i;};y.prototype._getApplicationTitle=function(){var i="";var $=sap.ui.core.Component.getOwnerComponentFor(this._oRootControl);if($){i=$.getMetadata().getManifestEntry("sap.app").title;}return i;};y.prototype._checkChangesExist=function(){var i=F.createForControl(this._oRootControl);if(i.getComponentName().length>0){return i.getComponentChanges().then(function($){return $.length>0;});}else{return Promise.resolve(false);}};return y;},true);
